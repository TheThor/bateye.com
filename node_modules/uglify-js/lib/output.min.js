"use strict";var EXPECT_DIRECTIVE=/^$|[;{][\s\n]*$/;function is_some_comments(a){return a.type=="comment2"&&/@preserve|@license|@cc_on/i.test(a.value)}function OutputStream(q){q=defaults(q,{ascii_only:false,beautify:false,bracketize:false,comments:false,ie8:false,indent_level:4,indent_start:0,inline_script:true,keep_quoted_props:false,max_line_len:false,preamble:null,preserve_line:false,quote_keys:false,quote_style:0,semicolons:true,shebang:true,source_map:null,webkit:false,width:80,wrap_iife:false},true);var g=return_false;if(q.comments){var d=q.comments;if(typeof q.comments==="string"&&/^\/.*\/[a-zA-Z]*$/.test(q.comments)){var u=q.comments.lastIndexOf("/");d=new RegExp(q.comments.substr(1,u-1),q.comments.substr(u+1))}if(d instanceof RegExp){g=function(O){return O.type!="comment5"&&d.test(O.value)}}else{if(typeof d==="function"){g=function(O){return O.type!="comment5"&&d(this,O)}}else{if(d==="some"){g=is_some_comments}else{g=return_true}}}}var E=0;var p=0;var K=1;var I=0;var e="";function h(P,O){return P.replace(/[\u0000-\u001f\u007f-\uffff]/g,function(Q){var R=Q.charCodeAt(0).toString(16);if(R.length<=2&&!O){while(R.length<2){R="0"+R}return"\\x"+R}else{while(R.length<4){R="0"+R}return"\\u"+R}})}function y(T,P){var S=0,R=0;T=T.replace(/[\\\b\f\n\r\v\t\x22\x27\u2028\u2029\0\ufeff]/g,function(V,U){switch(V){case'"':++S;return'"';case"'":++R;return"'";case"\\":return"\\\\";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\x0B":return q.ie8?"\\x0B":"\\v";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";case"\ufeff":return"\\ufeff";case"\0":return/[0-7]/.test(T.charAt(U+1))?"\\x00":"\\0"}return V});function Q(){return"'"+T.replace(/\x27/g,"\\'")+"'"}function O(){return'"'+T.replace(/\x22/g,'\\"')+'"'}if(q.ascii_only){T=h(T)}switch(q.quote_style){case 1:return Q();case 2:return O();case 3:return P=="'"?Q():O();default:return S>R?Q():O()}}function k(Q,O){var P=y(Q,O);if(q.inline_script){P=P.replace(/<\x2fscript([>\/\t\n\f\r ])/gi,"<\\/script$1");P=P.replace(/\x3c!--/g,"\\x3c!--");P=P.replace(/--\x3e/g,"--\\x3e")}return P}function x(O){O=O.toString();if(q.ascii_only){O=h(O,true)}return O}function B(O){return repeat_string(" ",q.indent_start+E-O*q.indent_level)}var L=false;var J=false;var m=0;var l="";var z,N,r=q.source_map&&[];var v=r?function(){r.forEach(function(O){try{q.source_map.add(O.token.file,O.line,O.col,O.token.line,O.token.col,!O.name&&O.token.type=="name"?O.token.value:O.name)}catch(P){AST_Node.warn("Couldn't figure out mapping for {file}:{line},{col} â†’ {cline},{ccol} [{name}]",{file:O.token.file,line:O.token.line,col:O.token.col,cline:O.line,ccol:O.col,name:O.name||""})}});r=[]}:noop;var f=q.max_line_len?function(){if(p>q.max_line_len){if(m){var P=e.slice(0,m);var O=e.slice(m);if(r){var Q=O.length-p;r.forEach(function(R){R.line++;R.col+=Q})}e=P+"\n"+O;K++;I++;p=O.length}if(p>q.max_line_len){AST_Node.warn("Output exceeds {max_line_len} characters",q)}}if(m){m=0;v()}}:noop;var c=makePredicate("( [ + * / - , .");function D(S){S=String(S);var Q=S.charAt(0);var R=l.charAt(l.length-1);if(J){J=false;if(R==":"&&Q=="}"||(!Q||";}".indexOf(Q)<0)&&R!=";"){if(q.semicolons||c(Q)){e+=";";p++;I++}else{f();e+="\n";I++;K++;p=0;if(/^\s+$/.test(S)){J=true}}if(!q.beautify){L=false}}}if(!q.beautify&&q.preserve_line&&o[o.length-1]){var P=o[o.length-1].start.line;while(K<P){f();e+="\n";I++;K++;p=0;L=false}}if(L){if((is_identifier_char(R)&&(is_identifier_char(Q)||Q=="\\"))||(Q=="/"&&Q==R)||((Q=="+"||Q=="-")&&Q==l)){e+=" ";p++;I++}L=false}if(z){r.push({token:z,name:N,line:K,col:p});z=false;if(!m){v()}}e+=S;I+=S.length;var O=S.split(/\r?\n/),T=O.length-1;K+=T;p+=O[0].length;if(T>0){f();p=O[T].length}l=S}var G=q.beautify?function(){D(" ")}:function(){L=true};var j=q.beautify?function(O){if(q.beautify){D(B(O?0.5:0))}}:noop;var H=q.beautify?function(Q,O){if(Q===true){Q=A()}var R=E;E=Q;var P=O();E=R;return P}:function(P,O){return O()};var a=q.beautify?function(){D("\n")}:q.max_line_len?function(){f();m=e.length}:noop;var M=q.beautify?function(){D(";")}:function(){J=true};function n(){J=false;D(";")}function A(){return E+q.indent_level}function b(O){var P;D("{");a();H(A(),function(){P=O()});j();D("}");return P}function C(O){D("(");var P=O();D(")");return P}function s(O){D("[");var P=O();D("]");return P}function i(){D(",");G()}function t(){D(":");G()}var w=r?function(P,O){z=P;N=O}:noop;function F(){if(m){f()}return e}var o=[];return{get:F,toString:F,indent:j,indentation:function(){return E},current_width:function(){return p-E},should_break:function(){return q.width&&this.current_width()>=q.width},newline:a,print:D,space:G,comma:i,colon:t,last:function(){return l},semicolon:M,force_semicolon:n,to_ascii:h,print_name:function(O){D(x(O))},print_string:function(R,O,P){var Q=k(R,O);if(P===true&&Q.indexOf("\\")===-1){if(!EXPECT_DIRECTIVE.test(e)){n()}n()}D(Q)},encode_string:k,next_indent:A,with_indent:H,with_block:b,with_parens:C,with_square:s,add_mapping:w,option:function(O){return q[O]},comment_filter:g,line:function(){return K},col:function(){return p},pos:function(){return I},push_node:function(O){o.push(O)},pop_node:function(){return o.pop()},parent:function(O){return o[o.length-2-(O||0)]}}}(function(){function g(q,r){q.DEFMETHOD("_codegen",r)}var i=false;var a=false;AST_Node.DEFMETHOD("print",function(u,r){var q=this,s=q._codegen,v=i;if(q instanceof AST_Directive&&q.value=="use asm"&&u.parent() instanceof AST_Scope){i=true}function t(){q.add_comments(u);q.add_source_map(u);s(q,u)}u.push_node(q);if(r||q.needs_parens(u)){u.with_parens(t)}else{t()}u.pop_node();if(q instanceof AST_Scope){i=v}});AST_Node.DEFMETHOD("_print",AST_Node.prototype.print);AST_Node.DEFMETHOD("print_to_string",function(q){var r=OutputStream(q);if(!q){r._readonly=true}this.print(r);return r.get()});AST_Node.DEFMETHOD("add_comments",function(r){if(r._readonly){return}var q=this;var u=q.start;if(u&&!u._comments_dumped){u._comments_dumped=true;var t=u.comments_before||[];if(q instanceof AST_Exit&&q.value){q.value.walk(new TreeWalker(function(v){if(v.start&&v.start.comments_before){t=t.concat(v.start.comments_before);v.start.comments_before=[]}if(v instanceof AST_Function||v instanceof AST_Array||v instanceof AST_Object){return true}}))}if(r.pos()==0){if(t.length>0&&r.option("shebang")&&t[0].type=="comment5"){r.print("#!"+t.shift().value+"\n");r.indent()}var s=r.option("preamble");if(s){r.print(s.replace(/\r\n?|[\n\u2028\u2029]|\s*$/g,"\n"))}}t=t.filter(r.comment_filter,q);if(!r.option("beautify")&&t.length>0&&/comment[134]/.test(t[0].type)&&r.col()!==0&&t[0].nlb){r.print("\n")}t.forEach(function(v){if(/comment[134]/.test(v.type)){r.print("//"+v.value+"\n");r.indent()}else{if(v.type=="comment2"){r.print("/*"+v.value+"*/");if(u.nlb){r.print("\n");r.indent()}else{r.space()}}}})}});function m(q,r){if(Array.isArray(q)){q.forEach(function(s){m(s,r)})}else{q.DEFMETHOD("needs_parens",r)}}m(AST_Node,function(){return false});m(AST_Function,function(q){if(first_in_statement(q)){return true}if(q.option("webkit")){var r=q.parent();if(r instanceof AST_PropAccess&&r.expression===this){return true}}if(q.option("wrap_iife")){var r=q.parent();return r instanceof AST_Call&&r.expression===this}return false});m(AST_Object,function(q){return first_in_statement(q)});m(AST_Unary,function(q){var r=q.parent();return r instanceof AST_PropAccess&&r.expression===this||r instanceof AST_Call&&r.expression===this});m(AST_Sequence,function(q){var r=q.parent();return r instanceof AST_Call||r instanceof AST_Unary||r instanceof AST_Binary||r instanceof AST_VarDef||r instanceof AST_PropAccess||r instanceof AST_Array||r instanceof AST_ObjectProperty||r instanceof AST_Conditional});m(AST_Binary,function(s){var v=s.parent();if(v instanceof AST_Call&&v.expression===this){return true}if(v instanceof AST_Unary){return true}if(v instanceof AST_PropAccess&&v.expression===this){return true}if(v instanceof AST_Binary){var r=v.operator,q=PRECEDENCE[r];var u=this.operator,t=PRECEDENCE[u];if(q>t||(q==t&&this===v.right)){return true}}});m(AST_PropAccess,function(q){var s=q.parent();if(s instanceof AST_New&&s.expression===this){var r=false;this.walk(new TreeWalker(function(t){if(r||t instanceof AST_Scope){return true}if(t instanceof AST_Call){r=true;return true}}));return r}});m(AST_Call,function(q){var r=q.parent(),s;if(r instanceof AST_New&&r.expression===this){return true}return this.expression instanceof AST_Function&&r instanceof AST_PropAccess&&r.expression===this&&(s=q.parent(1)) instanceof AST_Assign&&s.left===r});m(AST_New,function(q){var r=q.parent();if(!e(this,q)&&(r instanceof AST_PropAccess||r instanceof AST_Call&&r.expression===this)){return true}});m(AST_Number,function(q){var s=q.parent();if(s instanceof AST_PropAccess&&s.expression===this){var r=this.getValue();if(r<0||/^0/.test(o(r))){return true}}});m([AST_Assign,AST_Conditional],function(q){var r=q.parent();if(r instanceof AST_Unary){return true}if(r instanceof AST_Binary&&!(r instanceof AST_Assign)){return true}if(r instanceof AST_Call&&r.expression===this){return true}if(r instanceof AST_Conditional&&r.condition===this){return true}if(r instanceof AST_PropAccess&&r.expression===this){return true}});g(AST_Directive,function(r,q){q.print_string(r.value,r.quote);q.semicolon()});g(AST_Debugger,function(r,q){q.print("debugger");q.semicolon()});function f(q,u,r,t){var s=q.length-1;a=t;q.forEach(function(w,v){if(a===true&&!(w instanceof AST_Directive||w instanceof AST_EmptyStatement||(w instanceof AST_SimpleStatement&&w.body instanceof AST_String))){a=false}if(!(w instanceof AST_EmptyStatement)){r.indent();w.print(r);if(!(v==s&&u)){r.newline();if(u){r.newline()}}}if(a===true&&w instanceof AST_SimpleStatement&&w.body instanceof AST_String){a=false}});a=false}AST_StatementWithBody.DEFMETHOD("_do_print_body",function(q){l(this.body,q)});g(AST_Statement,function(r,q){r.body.print(q);q.semicolon()});g(AST_Toplevel,function(r,q){f(r.body,true,q,true);q.print("")});g(AST_LabeledStatement,function(r,q){r.label.print(q);q.colon();r.body.print(q)});g(AST_SimpleStatement,function(r,q){r.body.print(q);q.semicolon()});function k(q,r,s){if(q.length>0){r.with_block(function(){f(q,false,r,s)})}else{r.print("{}")}}g(AST_BlockStatement,function(r,q){k(r.body,q)});g(AST_EmptyStatement,function(r,q){q.semicolon()});g(AST_Do,function(r,q){q.print("do");q.space();n(r.body,q);q.space();q.print("while");q.space();q.with_parens(function(){r.condition.print(q)});q.semicolon()});g(AST_While,function(r,q){q.print("while");q.space();q.with_parens(function(){r.condition.print(q)});q.space();r._do_print_body(q)});g(AST_For,function(r,q){q.print("for");q.space();q.with_parens(function(){if(r.init){if(r.init instanceof AST_Definitions){r.init.print(q)}else{c(r.init,q,true)}q.print(";");q.space()}else{q.print(";")}if(r.condition){r.condition.print(q);q.print(";");q.space()}else{q.print(";")}if(r.step){r.step.print(q)}});q.space();r._do_print_body(q)});g(AST_ForIn,function(r,q){q.print("for");q.space();q.with_parens(function(){r.init.print(q);q.space();q.print("in");q.space();r.object.print(q)});q.space();r._do_print_body(q)});g(AST_With,function(r,q){q.print("with");q.space();q.with_parens(function(){r.expression.print(q)});q.space();r._do_print_body(q)});AST_Lambda.DEFMETHOD("_do_print",function(r,s){var q=this;if(!s){r.print("function")}if(q.name){r.space();q.name.print(r)}r.with_parens(function(){q.argnames.forEach(function(t,u){if(u){r.comma()}t.print(r)})});r.space();k(q.body,r,true)});g(AST_Lambda,function(r,q){r._do_print(q)});AST_Exit.DEFMETHOD("_do_print",function(q,r){q.print(r);if(this.value){q.space();this.value.print(q)}q.semicolon()});g(AST_Return,function(r,q){r._do_print(q,"return")});g(AST_Throw,function(r,q){r._do_print(q,"throw")});AST_LoopControl.DEFMETHOD("_do_print",function(q,r){q.print(r);if(this.label){q.space();this.label.print(q)}q.semicolon()});g(AST_Break,function(r,q){r._do_print(q,"break")});g(AST_Continue,function(r,q){r._do_print(q,"continue")});function p(s,r){var q=s.body;if(r.option("bracketize")||r.option("ie8")&&q instanceof AST_Do){return n(q,r)}if(!q){return r.force_semicolon()}while(true){if(q instanceof AST_If){if(!q.alternative){n(s.body,r);return}q=q.alternative}else{if(q instanceof AST_StatementWithBody){q=q.body}else{break}}}l(s.body,r)}g(AST_If,function(r,q){q.print("if");q.space();q.with_parens(function(){r.condition.print(q)});q.space();if(r.alternative){p(r,q);q.space();q.print("else");q.space();if(r.alternative instanceof AST_If){r.alternative.print(q)}else{l(r.alternative,q)}}else{r._do_print_body(q)}});g(AST_Switch,function(r,q){q.print("switch");q.space();q.with_parens(function(){r.expression.print(q)});q.space();var s=r.body.length-1;if(s<0){q.print("{}")}else{q.with_block(function(){r.body.forEach(function(u,t){q.indent(true);u.print(q);if(t<s&&u.body.length>0){q.newline()}})})}});AST_SwitchBranch.DEFMETHOD("_do_print_body",function(q){q.newline();this.body.forEach(function(r){q.indent();r.print(q);q.newline()})});g(AST_Default,function(r,q){q.print("default:");r._do_print_body(q)});g(AST_Case,function(r,q){q.print("case");q.space();r.expression.print(q);q.print(":");r._do_print_body(q)});g(AST_Try,function(r,q){q.print("try");q.space();k(r.body,q);if(r.bcatch){q.space();r.bcatch.print(q)}if(r.bfinally){q.space();r.bfinally.print(q)}});g(AST_Catch,function(r,q){q.print("catch");q.space();q.with_parens(function(){r.argname.print(q)});q.space();k(r.body,q)});g(AST_Finally,function(r,q){q.print("finally");q.space();k(r.body,q)});AST_Definitions.DEFMETHOD("_do_print",function(q,t){q.print(t);q.space();this.definitions.forEach(function(w,v){if(v){q.comma()}w.print(q)});var u=q.parent();var s=u instanceof AST_For||u instanceof AST_ForIn;var r=s&&u.init===this;if(!r){q.semicolon()}});g(AST_Var,function(r,q){r._do_print(q,"var")});function c(s,q,t){var r=false;if(t){s.walk(new TreeWalker(function(u){if(r||u instanceof AST_Scope){return true}if(u instanceof AST_Binary&&u.operator=="in"){r=true;return true}}))}s.print(q,r)}g(AST_VarDef,function(r,q){r.name.print(q);if(r.value){q.space();q.print("=");q.space();var t=q.parent(1);var s=t instanceof AST_For||t instanceof AST_ForIn;c(r.value,q,s)}});g(AST_Call,function(r,q){r.expression.print(q);if(r instanceof AST_New&&!e(r,q)){return}q.with_parens(function(){r.args.forEach(function(t,s){if(s){q.comma()}t.print(q)})})});g(AST_New,function(r,q){q.print("new");q.space();AST_Call.prototype._codegen(r,q)});AST_Sequence.DEFMETHOD("_do_print",function(q){this.expressions.forEach(function(s,r){if(r>0){q.comma();if(q.should_break()){q.newline();q.indent()}}s.print(q)})});g(AST_Sequence,function(r,q){r._do_print(q)});g(AST_Dot,function(r,q){var s=r.expression;s.print(q);if(s instanceof AST_Number&&s.getValue()>=0){if(!/[xa-f.)]/i.test(q.last())){q.print(".")}}q.print(".");q.add_mapping(r.end);q.print_name(r.property)});g(AST_Sub,function(r,q){r.expression.print(q);q.print("[");r.property.print(q);q.print("]")});g(AST_UnaryPrefix,function(r,q){var s=r.operator;q.print(s);if(/^[a-z]/i.test(s)||(/[+-]$/.test(s)&&r.expression instanceof AST_UnaryPrefix&&/^[+-]/.test(r.expression.operator))){q.space()}r.expression.print(q)});g(AST_UnaryPostfix,function(r,q){r.expression.print(q);q.print(r.operator)});g(AST_Binary,function(r,q){var s=r.operator;r.left.print(q);if(s[0]==">"&&r.left instanceof AST_UnaryPostfix&&r.left.operator=="--"){q.print(" ")}else{q.space()}q.print(s);if((s=="<"||s=="<<")&&r.right instanceof AST_UnaryPrefix&&r.right.operator=="!"&&r.right.expression instanceof AST_UnaryPrefix&&r.right.expression.operator=="--"){q.print(" ")}else{q.space()}r.right.print(q)});g(AST_Conditional,function(r,q){r.condition.print(q);q.space();q.print("?");q.space();r.consequent.print(q);q.space();q.colon();r.alternative.print(q)});g(AST_Array,function(r,q){q.with_square(function(){var t=r.elements,s=t.length;if(s>0){q.space()}t.forEach(function(v,u){if(u){q.comma()}v.print(q);if(u===s-1&&v instanceof AST_Hole){q.comma()}});if(s>0){q.space()}})});g(AST_Object,function(r,q){if(r.properties.length>0){q.with_block(function(){r.properties.forEach(function(t,s){if(s){q.print(",");q.newline()}q.indent();t.print(q)});q.newline()})}else{q.print("{}")}});function j(s,r,q){if(q.option("quote_keys")){q.print_string(s+"")}else{if((typeof s=="number"||!q.option("beautify")&&+s+""==s)&&parseFloat(s)>=0){q.print(o(s))}else{if(RESERVED_WORDS(s)?!q.option("ie8"):is_identifier_string(s)){if(r&&q.option("keep_quoted_props")){q.print_string(s,r)}else{q.print_name(s)}}else{q.print_string(s,r)}}}}g(AST_ObjectKeyVal,function(r,q){j(r.key,r.quote,q);q.colon();r.value.print(q)});AST_ObjectProperty.DEFMETHOD("_print_getter_setter",function(r,q){q.print(r);q.space();j(this.key.name,this.quote,q);this.value._do_print(q,true)});g(AST_ObjectSetter,function(r,q){r._print_getter_setter("set",q)});g(AST_ObjectGetter,function(r,q){r._print_getter_setter("get",q)});g(AST_Symbol,function(r,q){var s=r.definition();q.print_name(s?s.mangled_name||s.name:r.name)});g(AST_Hole,noop);g(AST_This,function(r,q){q.print("this")});g(AST_Constant,function(r,q){q.print(r.getValue())});g(AST_String,function(r,q){q.print_string(r.getValue(),r.quote,a)});g(AST_Number,function(r,q){if(i&&r.start&&r.start.raw!=null){q.print(r.start.raw)}else{q.print(o(r.getValue()))}});g(AST_RegExp,function(r,q){var s=r.getValue();var u=s.toString();if(s.raw_source){u="/"+s.raw_source+u.slice(u.lastIndexOf("/"))}if(q.option("ascii_only")){u=q.to_ascii(u)}q.print(u);var t=q.parent();if(t instanceof AST_Binary&&/^in/.test(t.operator)&&t.left===r){q.print(" ")}});function l(r,q){if(q.option("bracketize")){n(r,q)}else{if(!r||r instanceof AST_EmptyStatement){q.force_semicolon()}else{r.print(q)}}}function e(r,q){if(r.args.length>0){return true}return q.option("beautify")}function h(r){var t=r[0],q=t.length;for(var s=1;s<r.length;++s){if(r[s].length<q){t=r[s];q=t.length}}return t}function o(s){var t=s.toString(10),r=[t.replace(/^0\./,".").replace("e+","e")],q;if(Math.floor(s)===s){if(s>=0){r.push("0x"+s.toString(16).toLowerCase(),"0"+s.toString(8))}else{r.push("-0x"+(-s).toString(16).toLowerCase(),"-0"+(-s).toString(8))}if((q=/^(.*?)(0+)$/.exec(s))){r.push(q[1]+"e"+q[2].length)}}else{if((q=/^0?\.(0+)(.*)$/.exec(s))){r.push(q[2]+"e-"+(q[1].length+q[2].length),t.substr(t.indexOf(".")))}}return h(r)}function n(r,q){if(!r||r instanceof AST_EmptyStatement){q.print("{}")}else{if(r instanceof AST_BlockStatement){r.print(q)}else{q.with_block(function(){q.indent();r.print(q);q.newline()})}}}function b(q,r){q.DEFMETHOD("add_source_map",function(s){r(this,s)})}b(AST_Node,noop);function d(r,q){q.add_mapping(r.start)}b(AST_Directive,d);b(AST_Debugger,d);b(AST_Symbol,d);b(AST_Jump,d);b(AST_StatementWithBody,d);b(AST_LabeledStatement,noop);b(AST_Lambda,d);b(AST_Switch,d);b(AST_SwitchBranch,d);b(AST_BlockStatement,d);b(AST_Toplevel,noop);b(AST_New,d);b(AST_Try,d);b(AST_Catch,d);b(AST_Finally,d);b(AST_Definitions,d);b(AST_Constant,d);b(AST_ObjectSetter,function(r,q){q.add_mapping(r.start,r.key.name)});b(AST_ObjectGetter,function(r,q){q.add_mapping(r.start,r.key.name)});b(AST_ObjectProperty,function(r,q){q.add_mapping(r.start,r.key)})})();